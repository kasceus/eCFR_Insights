@page "/analytics/agency"


@model GraphsModel
<style>
    #agencyTreemap { display: block; }
</style>

<h2 class="mb-4">CFR Analytics</h2>


<div id="treemapWrapper" style="width:100%; height:700px; overflow:auto; border:1px solid #ccc;">
    <svg id="agencyTreemap" width="2000" height="1500"></svg>
</div>

@section Scripts {
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="~/js/agencyTreemap.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const data = @Html.Raw(Model.JsonHierarchy);
            agencyTreemap.render(data);
        });
    </script>
}
